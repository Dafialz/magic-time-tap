/* ===== Magic Time — hero, навігація, магазин, КРАФТ (плитки) ===== */
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@700;800&display=swap');

:root{
  --mtp-bg:#0b1220; --mtp-card:rgba(255,255,255,.06);
  --mtp-text:#e5e7eb; --mtp-text-dim:#cfd6ff; --mtp-border:rgba(255,255,255,.08);
  --mtp-grad-a:#28E7A8; --mtp-grad-b:#6F52FF; --mtp-yellow:#ffd54a;
  --clock-size: min(72vw, 420px);
}

*{ box-sizing:border-box; }
html, body, #root{ height:100%; }

body{
  margin:0;
  font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans";
  color:var(--mtp-text);
  background:
    url("/bg-space.jpg") center/cover no-repeat,
    radial-gradient(1200px 800px at 50% -10%, #162034 0%, var(--mtp-bg) 70%);
  background-attachment:fixed,fixed;
  min-height:100dvh;
  overflow-y:auto;

  /* анти long-press меню */
  -webkit-touch-callout:none;
  -webkit-user-select:none;
  user-select:none;
}

#root{
  max-width:560px;
  margin:0 auto;
  padding:0 14px calc(160px + env(safe-area-inset-bottom, 0px));
  min-height:100dvh;
}

/* ===== HERO ===== */
.hero{ position:relative; display:grid; gap:14px; place-items:center; }
.hero__title{
  margin-top:clamp(8px,2vh,24px); text-align:center;
  font-family:"Cinzel"; font-weight:800; letter-spacing:1px;
  font-size:clamp(36px,8.6vw,56px); line-height:1.05;
  background:linear-gradient(180deg,#79ffe3 0%,#39f3c1 40%,#55ffee 60%,#66a6ff 95%);
  -webkit-background-clip:text; background-clip:text; color:transparent;
  text-shadow:0 12px 32px rgba(46,255,204,.10);
}
.hero__clock{ position:relative; width:var(--clock-size); height:var(--clock-size); display:grid; place-items:center; margin:4px auto; }
.hero__clock::before{
  content:""; position:absolute; inset:0; border-radius:24px;
  background:radial-gradient(45% 45% at 50% 28%, rgba(46,255,204,.35), transparent 70%),
             radial-gradient(55% 60% at 50% 75%, rgba(111,82,255,.28), transparent 80%);
  filter: blur(18px);
}
.hero__img{ width:100%; height:100%; object-fit:contain; opacity:.9;
  filter: drop-shadow(0 0 14px rgba(40,231,168,.55)) drop-shadow(0 0 32px rgba(111,82,255,.35))
          saturate(1.15) brightness(1.08);
  pointer-events:none;  /* щоб довгий тап по зображенню не відкривав меню */
  -webkit-user-drag:none;
}
.hero__tap{
  position:absolute; inset:0; border:0; background:transparent; cursor:pointer;
  -webkit-tap-highlight-color:transparent; outline:none;
}

/* ===== Статистика (MegicTimePoint) ===== */
.stat-card{
  margin:6px auto 10px; width:100%; max-width:560px;
  display:grid; grid-template-columns:1fr; gap:6px;
  padding:10px 12px; border-radius:14px;
  background: color-mix(in oklab, var(--mtp-bg) 80%, transparent);
  border:1px solid color-mix(in oklab, #fff 7%, var(--mtp-border));
  box-shadow: 0 8px 18px rgba(0,0,0,.22), inset 0 0 0 1px rgba(255,255,255,.03);
  justify-items:center; /* по центру */
  text-align:center;
}
.stat-card__caption{ font-weight:900; letter-spacing:.2px; opacity:.95; color:#66ffd8; }
.stat-card__value{ font-size:clamp(26px,7.6vw,42px); font-weight:900; text-align:center; }

/* ===== Метеор ===== */
.meteor-card{
  width:100%; max-width:560px; display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:10px;
  padding:12px; border-radius:14px; margin:4px auto 10px;
  border:1px solid color-mix(in oklab, #fff 7%, var(--mtp-border));
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--mtp-grad-b) 10%, transparent),
    color-mix(in oklab, var(--mtp-bg) 86%, transparent));
  color:inherit; text-align:left;
  box-shadow: 0 10px 26px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.03);
  appearance:none; cursor:pointer; border:0;
  -webkit-tap-highlight-color:transparent;
}
.meteor-card__icon{ font-size:20px; filter: drop-shadow(0 0 8px rgba(255,255,255,.25)); }
.meteor-card__title{ font-weight:900; }
.meteor-card__subtitle{ opacity:.9; font-size:14px; }
.meteor-card__bonus{ font-weight:900; display:grid; justify-items:end; gap:2px; }
.meteor-card__bonus small{ opacity:.8; }

/* ===== BottomNav ===== */
.bottom-nav{
  position:fixed; left:50%; transform:translateX(-50%); bottom:0;
  width:min(560px, 100vw);
  display:grid; grid-template-columns:repeat(5,1fr); gap:10px;
  padding:12px 14px calc(14px + env(safe-area-inset-bottom));
  background: color-mix(in oklab, var(--mtp-bg) 86%, transparent);
  backdrop-filter: blur(8px) saturate(120%);
  border-top:1px solid var(--mtp-border); z-index:50;
}
.bn-item{ appearance:none; border:0; background:transparent;
  display:grid; grid-template-rows:auto auto; justify-items:center; align-items:start; gap:6px;
  padding:0; border-radius:14px; cursor:pointer; color:#66ffd8; font-weight:800;
  transition: transform .08s, background .18s, box-shadow .18s, color .18s, filter .18s;
  outline:none; user-select:none; min-width:0; }
.bn-item:active{ transform: translateY(1px) scale(.98); }
.bn-item.active{ color:#fff; filter: drop-shadow(0 0 12px rgba(40,231,168,.5)); }
.bn-card{
  width:100%; height:56px; max-width:96px; border-radius:16px; display:grid; place-items:center;
  background: color-mix(in oklab, var(--mtp-bg) 86%, transparent);
  border: 1px solid color-mix(in oklab, var(--mtp-grad-a) 32%, var(--mtp-border));
  box-shadow: 0 8px 20px rgba(0,0,0,.28), inset 0 0 0 1px rgba(255,255,255,.03);
}
.bn-item.active .bn-card{
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--mtp-grad-a) 10%, transparent),
    color-mix(in oklab, var(--mtp-grad-a) 22%, transparent));
  box-shadow: 0 12px 28px rgba(40,231,168,.28);
  border-color: color-mix(in oklab, var(--mtp-grad-a) 60%, var(--mtp-border));
}
.bn-icon{ font-size:20px; line-height:1; }
.bn-label{ font-size:12px; letter-spacing:.2px; color:#66ffd8; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.bn-item.active .bn-label{ color:#fff; }

@media (max-width: 430px){ .bottom-nav{ gap:8px; padding:10px 12px calc(12px + env(safe-area-inset-bottom)); } .bn-card{ height:54px; } }
@media (max-width: 390px){ .bn-card{ height:50px; border-radius:14px; } .bn-icon{ font-size:18px; } .bn-label{ font-size:11px; } }
@media (max-width: 360px){ .bottom-nav{ gap:6px; padding:10px 10px calc(10px + env(safe-area-inset-bottom)); } .bn-card{ height:46px; } .bn-label{ font-size:10.5px; } }

/* ===== CRAFT (квадратні плитки) ===== */

/* зробили розділ довшим — запас під довгий тап */
.craft{
  padding-bottom: calc(180px + env(safe-area-inset-bottom, 0px));
}

/* ✅ важливо: деякі Android WebView “глушать” pointermove,
   якщо touch-action стоїть лише на кнопці */
.craft .craft-root,
.craft .craft-grid{
  touch-action: none;
}

.craft .craft-grid{
  display:grid;
  grid-template-columns: repeat(4, 1fr); /* 4 колонки — компактно */
  gap:8px; width:100%; max-width:560px; margin:8px auto 12px;
}

.craft .cell{
  appearance:none; border:1px solid color-mix(in oklab, #fff 7%, var(--mtp-border));
  background: color-mix(in oklab, var(--mtp-bg) 78%, transparent);
  box-shadow: 0 6px 14px rgba(0,0,0,.22), inset 0 0 0 1px rgba(255,255,255,.03);
  border-radius:12px; color:var(--mtp-text); cursor:pointer;
  -webkit-tap-highlight-color: transparent;

  /* анти long-press/контекстне меню */
  -webkit-touch-callout:none;
  -webkit-user-select:none;
  user-select:none;

  /* ✅ КРИТИЧНО ДЛЯ DRAG: дозволяє pointermove і не дає сторінці “красти” жест */
  touch-action: none;
}

.craft .cell.tile{
  position:relative; padding:6px; aspect-ratio: 1 / 1; min-height:0; overflow:hidden;

  /* ✅ дублюємо для надійності на деяких WebView */
  touch-action: none;
}

.craft .cell.has{
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--mtp-grad-b) 16%, transparent),
    color-mix(in oklab, var(--mtp-bg) 80%, transparent));
  border-color: color-mix(in oklab, var(--mtp-grad-b) 40%, var(--mtp-border));
}
.craft .cell:disabled{ opacity:.65; cursor:default; }

/* вміст плитки */
.craft .tile-fig{ position:absolute; inset:6px; display:grid; place-items:center; border-radius:10px; touch-action:none; }
.craft .tile-img{
  width:80%; height:80%; object-fit:contain; border-radius:10px;
  box-shadow: 0 0 0 2px rgba(255,255,255,.06), inset 0 0 18px rgba(255,255,255,.04);
  -webkit-user-drag:none;
  user-select:none;
  pointer-events:none; /* щоб під пальцем не “ловився” img, а ловилась кнопка */
}
.craft .tile-plus{ font-weight:900; font-size:26px; opacity:.85; }
.craft .tile-lvl{
  position:absolute; top:6px; right:6px; font-weight:900; font-size:12px;
  padding:3px 6px; border-radius:8px; background:rgba(0,0,0,.35); backdrop-filter: blur(4px);
  pointer-events:none;
}
.craft .tile-sub{
  position:absolute; left:6px; right:6px; bottom:6px; text-align:center;
  font-size:11px; font-weight:700; opacity:.95; background:rgba(0,0,0,.25);
  padding:3px 6px; border-radius:8px; backdrop-filter: blur(3px);
  pointer-events:none;
}

/* Drop feedback */
.craft .cell.drop-ok-move{ box-shadow: 0 0 0 2px rgba(80,200,255,.42) inset; }
.craft .cell.drop-ok-merge{
  box-shadow: 0 0 0 2px rgba(160,120,255,.55) inset, 0 0 10px rgba(160,120,255,.25);
  transform: scale(1.01);
}
.craft .cell.drop-bad{ box-shadow: 0 0 0 2px rgba(255,100,100,.35) inset; }

/* $-кнопка (drop-target) */
.craft-dollar{
  position:fixed; right: calc(14px + 2px);
  bottom: calc(88px + env(safe-area-inset-bottom));
  width:56px; height:56px; border-radius:999px;
  border:1px solid color-mix(in oklab, var(--mtp-grad-a) 60%, var(--mtp-border));
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--mtp-grad-a) 16%, transparent),
    color-mix(in oklab, var(--mtp-bg) 84%, transparent));
  color:#66ffd8; font-weight:900; font-size:24px; line-height:1;
  display:grid; place-items:center;
  box-shadow: 0 10px 24px rgba(40,231,168,.25), inset 0 0 0 1px rgba(255,255,255,.04);
  user-select:none;
  touch-action:none;
  -webkit-tap-highlight-color: transparent;
}
.craft-dollar.drag-over{
  border-color: color-mix(in oklab, var(--mtp-grad-a) 85%, #fff);
  box-shadow: 0 0 0 3px rgba(40,231,168,.25), 0 12px 28px rgba(40,231,168,.35), inset 0 0 0 1px rgba(255,255,255,.06);
  filter: drop-shadow(0 0 18px rgba(40,231,168,.45));
}

/* ===== SHOP (без змін) ===== */
.shop-balance{ margin:6px 0 10px; opacity:.95; }
.shop-list{ display:grid; gap:12px; }
.shop-item{
  display:grid; grid-template-columns: 1fr auto; align-items:center;
  padding:12px; border-radius:16px;
  background: color-mix(in oklab, var(--mtp-bg) 80%, transparent);
  border:1px solid color-mix(in oklab, #fff 7%, var(--mtp-border));
  box-shadow: 0 10px 26px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.03);
}
.shop-item.can{ box-shadow: 0 10px 28px rgba(40,231,168,.20), inset 0 0 0 1px rgba(255,255,255,.04); }
.shop-left{ display:flex; gap:12px; align-items:center; }
.shop-icon{ width:56px; height:56px; border-radius:14px; display:grid; place-items:center; font-size:26px;
  background: radial-gradient(60% 60% at 30% 30%, rgba(255,255,255,.12), transparent 60%); border:1px solid color-mix(in oklab, #fff 8%, var(--mtp-border)); }
.shop-title{ font-weight:800; letter-spacing:.2px; }
.shop-sub{ opacity:.9; margin-top:3px; }
.shop-buy{ appearance:none; border:0; padding:12px 16px; border-radius:14px; font-weight:900; letter-spacing:.3px; color:#0b1220;
  background:linear-gradient(180deg, #66ffd8, #42e2be); box-shadow: 0 10px 26px rgba(40,231,168,.35); }
.shop-buy:disabled{ filter:grayscale(.6) opacity(.7); color:#c6cbd7; background:linear-gradient(180deg, #445c58, #2c3e3b); box-shadow:none; cursor:default; }

/* ===== CHESTS (Сундуки) ===== */
.chests h2{ margin:10px 0 12px; }

.ton-hint{
  display:flex; align-items:center; gap:12px; flex-wrap:wrap;
  margin-bottom:14px;
}
.ton-btn{
  display:inline-flex; align-items:center; gap:8px;
  background:#161f2b; color:#37a6ff; border:1px solid #1f2d3d;
  padding:8px 12px; border-radius:10px; font-weight:800; text-decoration:none;
}
.ton-btn:hover{ filter:brightness(1.08); }
.ton-sub{ opacity:.7; font-size:13px; }

.chest-grid{
  display:grid; gap:14px;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}
.chest-card{
  background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08);
  border-radius:16px; padding:16px; text-align:center;
  box-shadow: 0 10px 26px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.03);
}
.chest-img{
  width:136px; height:136px; object-fit:contain; margin:6px auto 12px; display:block;
  -webkit-user-drag:none;
}
.chest-title{ font-weight:900; margin-bottom:4px; letter-spacing:.2px; }
.chest-price{ opacity:.9; margin-bottom:12px; }
.open-btn{
  padding:12px 16px; border-radius:12px; border:0; cursor:pointer; font-weight:900;
  background:linear-gradient(180deg, #53ffa6 0%, #15d3c0 100%); color:#042018;
}
.tier-blue .chest-card{ box-shadow: inset 0 0 18px rgba(80,200,255,.12); }
.tier-purple .chest-card{ box-shadow: inset 0 0 18px rgba(185,120,255,.14); }
.tier-gold .chest-card{ box-shadow: inset 0 0 18px rgba(255,210,90,.18); }

/* ===== POPUP (універсальний) ===== */
.mt-modal{
  position:fixed; inset:0; z-index:60;
  display:grid; place-items:center;
  padding:20px 14px calc(40px + env(safe-area-inset-bottom, 0px));
  background: radial-gradient(1000px 700px at 50% 10%, rgba(20,30,45,.88), rgba(10,15,25,.72));
  backdrop-filter: blur(6px) saturate(120%);
}
.mt-modal__card{
  width:min(92vw, 420px);
  position:relative;
  border-radius:18px;
  background: color-mix(in oklab, var(--mtp-bg) 90%, #0f172a 10%);
  border:1px solid color-mix(in oklab, #fff 10%, var(--mtp-border));
  box-shadow: 0 18px 48px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.04);
  padding:22px 16px 16px;
  text-align:center;
}
.mt-modal__badge{
  position:absolute; left:50%; transform:translate(-50%, -60%);
  width:76px; height:76px; border-radius:999px;
  background: radial-gradient(60% 60% at 40% 40%, rgba(102,255,216,.35), transparent 60%);
  border:2px solid color-mix(in oklab, var(--mtp-grad-a) 60%, #0b1220);
  box-shadow: 0 0 0 6px rgba(40,231,168,.15), 0 12px 36px rgba(0,0,0,.45);
  display:grid; place-items:center;
  overflow:hidden;
}
.mt-modal__badge img{ width:100%; height:100%; object-fit:cover; opacity:.95; -webkit-user-drag:none; }

.mt-modal__title{ margin-top:24px; font-weight:900; font-size:18px; }
.mt-modal__content{ margin:12px 0 16px; }
.mt-modal__icon{
  width:96px; height:96px; object-fit:contain;
  border-radius:12px; box-shadow: 0 0 0 2px rgba(255,255,255,.06), inset 0 0 18px rgba(255,255,255,.04);
  margin:8px auto 12px; display:block;
  -webkit-user-drag:none;
}
.mt-modal__actions{ display:grid; gap:10px; }
.mt-modal__btn{
  appearance:none; border:0; cursor:pointer; font-weight:900;
  padding:10px 14px; border-radius:12px;
  background:linear-gradient(180deg, #66ffd8, #42e2be); color:#05221b;
}
.mt-modal__btn--ghost{
  background:rgba(255,255,255,.1); color:#fff;
}

/* Backward-compat (старі класи попапа в SkinsShop, якщо ще залишились): */
.loot-modal{ position:fixed; inset:0; background:rgba(0,0,0,.55); display:grid; place-items:center; z-index:60; }
.loot-box{
  width:min(92vw, 420px);
  background:rgba(25,30,40,.95); border:1px solid rgba(255,255,255,.1);
  border-radius:16px; padding:18px; text-align:center;
  box-shadow: 0 18px 48px rgba(0,0,0,.35);
}
.loot-title{ font-weight:800; margin-bottom:10px; }
.loot-icon{
  width:96px; height:96px; object-fit:contain;
  border-radius:12px; box-shadow: 0 0 0 2px rgba(255,255,255,.06), inset 0 0 18px rgba(255,255,255,.04);
  margin:10px auto 14px; display:block;
  -webkit-user-drag:none;
}
.close-btn{
  padding:10px 14px; border-radius:10px; border:0; cursor:pointer; font-weight:800;
  background:rgba(255,255,255,.1); color:#fff;
}
